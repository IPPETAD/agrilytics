{% extends "base.html" %}

{% block title %}Field{% endblock %}

{% block content %}

<h1>Field {{field.name}} <small>Details</small></h1>
<a href='edit'><h3>Edit</h4></a>

<div id="mapview" style="height: 400px;"></div>

<script>
var geo = {{field.geo|safe or []}};

if (geo) {
	$( document ).ready(function() {
		// create a map in the "map" div, set the view to a given place and zoom
		var map = L.map('mapview').setView([53, -100], 4);

		// add an OpenStreetMap tile layer
		L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
		    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
		}).addTo(map);
		
		L.geoJson(geo).addTo(map);
	});
	
	
}

</script>
{% if field.section %}
<p>This field contains the following sections:</p>
<ul>
    {% for section in field.section %}
    <li><a href="section/{{section.name}}">{{ section.name }}</a>
    {% endfor %}
</ul>

<p>and the following crops:</p>
<ul>
    {% for crop in crops %}
        <li>{{ crop }}</li>
    {% endfor %}
</ul>
{% else %}
<p>There are no sections. <a href="section/add">Add one</a></p>
{% endif %}
<form method="post" role="form" onsubmit="return confim('Are you sure you want to delete this field? It cannot be undone.')">
    {{ form.hidden_tag() }}
    <button type="submit" value="confirm" class="btn btn-primary">Delete</button>
</form>
{% endblock %}


